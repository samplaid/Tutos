<search-menu path='..'></search-menu>
<div class="line-break"></div>

<div class="split-screen">
    <div class="form">
        <div class="row">
            <div class="col-md-10">
                <form role="form" (ngSubmit)="search(1)" #searchForm="ngForm" class="form-horizontal">
                    <div class="row">
                        <div class="col-md-10">
                            <div class="form-group">
                                <label class="col-md-1 control-label" for="codeName">Name / Code</label>        
                                <div class="col-md-2">
                                    <input type="text" id="codename" name="nm-codename" class="input-sm form-control" [(ngModel)]="criteriaCodeName" [autofocus]>
                                </div>
                                <label class="col-md-1 control-label" for="firstname">Firstname</label>    
                                <div class="col-md-2">
                                    <input type="text" id="firstname" name="nm-firstname" class="input-sm form-control" [(ngModel)]="criteriaFirstname">
                                </div>
                                <label class="col-md-1 control-label" for="firstname">Maiden Name</label>    
                                <div class="col-md-2">
                                    <input type="text" id="maidenName" name="nm-maidenName" class="input-sm form-control" [(ngModel)]="criteriaMaidenName">
                                </div>
                                <label class="col-md-1 control-label" for="dateOfBirth">Date of birth</label>
                                <div id="dateOfBirth" class="col-md-2">
                                    <datepicker [(date)]="criteriaDate"></datepicker>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2 text-center">
                            <button class="btn btn-primary btn-xs" [disabled]="isCriteriaSet" type="submit">
                                <span aria-hidden="true" class="glyphicon glyphicon-search"></span> 
                                Search
                            </button>
                            <button class="btn btn-primary btn-xs" [disabled]="isCriteriaSet" type="button" (click)="eraseFields()">
                                <i class="fa fa-eraser" aria-hidden="true"></i>
                                Clear
                            </button> 
                        </div>
                    </div>     
                </form>                   
            </div>            
            <div class="col-md-2">
                <div class="pull-right" *ngIf="page.totalRecordCount > 0">{{page.totalRecordCount}} Result(s)</div>    
            </div>
        </div>
        
        <div class="line-break-big"></div>
        <div class="relative">
          <div [ngBusy]="subs">
            <table class="table dataTable table-striped table-hover nomargin fullwidth" role="grid" *ngIf="page.content">
                <thead>
                    <tr role="row">
                        <th>Code</th>
                        <th>Name</th>
                        <th>Maiden Name</th>
                        <th>Address</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let client of page.content">
                        <td>{{client.cliId }}</td>                        
                        <td>
                            <ng-container [ngSwitch]="client.type">
                                <a *ngSwitchCase="3" [routerLink]="['/client/moral/'+ client?.cliId]" target="_blank" highlight="text-danger"  [pattern]="regXp"> {{client.displayName}}</a>
                                <a *ngSwitchDefault [routerLink]="['/client/physical/'+ client?.cliId]" target="_blank" highlight="text-danger"  [pattern]="regXp">{{client.displayName}}</a>
                            </ng-container>                            
                        </td>                       
                        <td>{{client.maidenName }}</td>                        
                        <td >{{client | address}}</td>
                    </tr>
                    <tr *ngIf="page.totalRecordCount === 0">
                        <td colspan="10" class="text-center">
                            <p style="padding: 300px">No result found </p>
                        </td>
                    </tr>
                </tbody>
                <tfoot *ngIf="!!page && page.totalPageCount > 1">
                    <tr>
                        <td colspan="10" class="text-center">
                        <pagination class="text-center" [boundaryLinks]="true" 
                                    [totalItems]="page.totalRecordCount" [itemsPerPage]="page.pageSize" [(ngModel)]="page.currentPage" (pageChanged)="search($event.page)" [maxSize]="10"
                                  previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;"></pagination>
                        </td>
                    </tr>
                </tfoot>                
            </table>

          </div>
        </div>
        <div class="row marginTop4">
            <div class="col-md-12 text-center">
                <a role="button" class="btn btn-xs btn-primary text-left" [routerLink]="['/client/physical']" target="_blank" [hasRoles]="[ appRoles.CLIENT_EDIT ]">New Client</a>
                <a role="button" class="btn btn-xs btn-primary text-left" [routerLink]="['/client/moral']" target="_blank"  [hasRoles]="[ appRoles.CLIENT_EDIT ]">New Entity</a>
            </div>
        </div>
    </div>   
</div>