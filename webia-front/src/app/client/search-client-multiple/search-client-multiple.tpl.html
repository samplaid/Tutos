<div>
    <ng-template #content >
        <div class="modal-header">
            <button type="button" class="close pull-right" aria-label="Close" (click)="selectModal.hide()"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search {{_header}}</h4>
        </div>
        <div class="modal-body">
            <form (ngSubmit)="search(1)" #searchForm="ngForm">
                <label class="col-xs-2 text-right marginTop">Name / Code</label>
                <div class="col-xs-3">
                    <input type="text" id="searchTxt" name="searchTxt" class="input-sm form-control" [(ngModel)]="_searchCriteria.filter" [autofocus]>
                </div>
                <label class="col-xs-2 text-right marginTop">Date of birth</label>
                <div class="col-xs-3">
                     <datepicker [(date)]="_date"></datepicker>
                </div>               
                <button class="btn btn-primary btn-xs" [disabled]="!_searchCriteria.filter && !_date" type="submit">
                    <span aria-hidden="true" class="glyphicon glyphicon-search"></span> 
                    Search
                </button>
                <div class="pull-right" *ngIf="_page.totalRecordCount > 0">{{_page.totalRecordCount}} Result(s)</div>
            </form>
            <div class="line-break"></div>
            <div class="relative">
               <div [ngBusy]="[_sub]">
                <table class="table dataTable table-striped table-hover nomargin fullwidth" role="grid" *ngIf="_page.content">
                    <thead>
                        <tr role="row">
                            <th></th>
                            <th>Code</th>
                            <th>Name</th>
                            <th>Address</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let client of _page.content" (click)="select(client)" [class.selected]="isSelected(client)">
                            <td>
                                 <label class="checkbox-inline" *ngIf="!!client">
                                    <input #input type="checkbox" id="cb-{{ i }}" [value]="client.cliId" [checked]="isSelected(client)" (change)="select(client)" [desactive]="mode"> 
                                    <span class="cr">
                                        <i class="cr-icon">&#x2714;</i>
                                    </span>
                                </label>
                            </td>
                            <td>{{client.cliId }}</td>
                            <!--<td>{{client.name | capitalize}} & {{client.firstName}} ({{ client.dateOfBirth | date:'dd/MM/yyyy'}})</td>-->
                            <td>
                               <span highlight="text-danger" [pattern]="clientRegXp">{{ client?.displayName }}</span>
                            </td>
                            <td>{{client | address}}</td>
                        </tr>
                        <tr *ngIf="_noResult">
                            <td colspan="4" class="text-center">
                                <p style="padding: 300px">No result found </p>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot *ngIf="_page.totalPageCount>1">
                        <tr>
                            <td colspan="10" class="text-center">
                                <!-- <ngb-pagination *ngIf="_page.totalPageCount > 1" class="text-center" (pageChange)="search($event)" [collectionSize]="_page.totalRecordCount"
                        [pageSize]="_page.pageSize" [(page)]="_page.currentPage" [maxSize]="10" [ellipses]="true" [boundaryLinks]="true"></ngb-pagination> -->

                                <pagination  class="text-center" [boundaryLinks]="true" 
                                            [totalItems]="_page.totalRecordCount" [itemsPerPage]="_page.pageSize" [(ngModel)]="_page.currentPage" (pageChanged)="search($event.page)" [maxSize]="10"
                                            previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;"></pagination>                                                    
                            </td>
                        </tr>
                    </tfoot>                    
                </table>

                
              </div>
            </div>
        </div>
        <div class="modal-footer">
            <div class="row">
                <div class="col-md-6 modal-footer-left">
                    <button type="button" class="btn btn-xs btn-primary text-left" [disabled]="!(_noResult || (_page && _page.content && _page.content.length>0))" (click)="createClient(1)" [hasRoles]="[ appRoles.CLIENT_EDIT ]">New Client</button>                    
                </div>          
                <div class="col-md-6 modal-footer-rigth">
                    <button type="button" class="btn btn-xs btn-primary" [disabled]="!_selectedItems || _selectedItems.length == 0 " (click)="addToStack()">Add</button>
                    <button type="button" class="btn btn-xs btn-primary" [disabled]="!_selectedItems || _selectedItems.length == 0 " (click)="valide(_selectedItems)">Validate</button>
                    <button type="button" class="btn btn-xs btn-primary" (click)="d(0)">Cancel</button>
                </div>
            </div>            
        </div>
    </ng-template>

    <!--  -->
    <button (click)="modalOpen(content)" [disabled]="disabled" class="btn btn-xs btn-primary paddingVertical" >
        <span aria-hidden="true" class="glyphicon glyphicon-search"></span>{{ buttonCaption }}
    </button>

</div>