<section subject="broker-input">
    
        <!-- Broker and contract ref-->
        <div class="row form-inline">
            <label class="marginTop col-md-2 text-right">Broker</label>
            <div class="form-group w-col-md-9 form-inline paddingRight">
                <search-agent   [agentId]="broker.partnerId"
                                [labelFn]="name_status" 
                                [type]="'BK'" 
                                [disabled]="mode == stateMode.readonly"
                                [allowClear]="false"
                                (agentIdChange)="onAgentIdChange($event)"
                                (onChange)="onBrokerChange($event)">
                </search-agent>
            </div>
            <ng-container *ngIf="canShowContactRef">
                <label class="marginTop w-col-md-3 text-right nopadding">Contract Ref</label>
                <div class="col-md-2">
                    <input maxlength="30" type="text" class="form-control input-sm" [desactive]="mode" [ngModel]="brokerRefContract" (ngModelChange)="onBrokerRefContractChange($event)" >
                </div>
            </ng-container>            
        </div>

        <!-- Mandate transmission-->
        <div class="row form-horizontal" *ngIf="canShowMandateTransmission">
            <div class="col-md-4 col-md-offset-2 nopadding">
                <label class="control-label col-md-6 nopadding">Mandate transmission</label>
                <div class="radio col-md-6 nopadding">
                    <label class="radio-inline">
                        <input class="form-control input input-sm" [desactive]="mode" type="radio" name="mandateBroker"  [value]="true" [checked]="broker.partnerAuthorized" [(ngModel)]="broker.partnerAuthorized">
                        <span class="cr"><i class="cr-icon fa fa-circle"></i></span>Yes
                    </label>
                    <label class="radio-inline">
                        <input class="form-control input input-sm"  [desactive]="mode" type="radio" name="mandateBroker"  [value]="false" [checked]="!broker.partnerAuthorized" [(ngModel)]="broker.partnerAuthorized">
                        <span class="cr"><i class="cr-icon fa fa-circle"></i></span>No
                    </label>                                                
                </div>
            </div>
        </div>

        <!-- Contact person-->
        <div class="row marginBottom2" *ngIf="canShowContactPerson">
            <label class="marginTop col-md-2 text-right">Contact person</label>
            <div class="form-group col-md-5">
                <ng-container>
                    <agc-add-select initialFunction="CPS" [disabled]="mode == stateMode.readonly" css="form-control input-sm" [agent]="selectedAgent.broker" [(contactId)]="brokerContact.partnerId"></agc-add-select> 
                </ng-container>            
            </div>
        </div>

        <!-- Sub broker-->
        <div class="row marginBottom2" *ngIf="canShowSubBroker && subBrokerList && subBrokerList.length > 0"> 
            <label class="marginTop col-md-2 text-right">Sub-broker</label>
            <div class="form-group col-md-5">
                <span class="form-inline">
                    <select class="form-control input-sm text-left" [(ngModel)]="subBroker.partnerId" [desactive]="mode" (change)="onSubBrokerChange($event)">
                        <option [ngValue]="undefined"></option>
                        <ng-container *ngIf="subBrokerList && subBrokerList.length > 0">
                            <option *ngFor="let a of subBrokerList" [ngValue]="a.agtId"><span [innerHtml]="a.name"></span></option>
                        </ng-container>
                    </select> 
                </span>  
            </div> 
        </div>
</section>
