<ng-template ngbModalContainer  *ngIf="!inModal"></ng-template>
<div class="marginTop4 relative" >
 <div [ngBusy]="[busy]">
	<div class="fund fe fund-container container-fluid relative">
		<div class="split-screen" [ngBusy]="subs">
			<div class="menu marginLeft3" *ngIf="!inModal">
				<div class="row vertical-center-noline ">
					<!-- Dedicated Fund: Header -->						
					<div class="col-md-6 paddingLeft12">
						<h3>{{title}}</h3>
					</div>
					<div class="col-md-6">
						<div class="pull-right paddingRight7">
							<button type="submit" class="btn btn-xs btn-primary" (click)="save()" [desactive]="mode">
								<i class="fa fa-floppy-o"></i>Save</button>
							<button type="button" class="btn btn-xs btn-primary" (click)="refresh()" [desactive]="mode">
								<i class="fa fa-refresh"></i>Refresh</button>
						</div>
					</div>
					
				</div>
			</div>	
			<!-- Dedicated Fund: Content -->			
				<div  [ngClass]="{'form':!inModal}">
					<div class="row">
						<div class="col-md-8 col-md-offset-2">	
							<ngbd-alert-container ref='fundCpt'></ngbd-alert-container>
						</div>
					</div>
					<!-- Code/name/Pool/Document Name-->
					<div class="row">
						<div class="col-md-6" >
							<div class="form-horizontal">
								<div class="form-group">
									<label for="code" class="col-sm-4 control-label">Code</label>
									<div class="col-sm-2">
										<input disabled type="text" name="code" class="form-control input-sm rounded" id="code" [desactive]="mode" [(ngModel)]="fund.fdsId" maxlength="8">					
									</div>
									<div class="form-group">
										<div class="col-sm-3 col-sm-push-1 col-md-push-3">
											<div class="checkbox checkbox-r">
												<label>
													<input #inputCheck type="checkbox"  [desactive]="mode" [checked]="fund.status==1" (change)="checkChange(inputCheck)">
													<span class="cr"><i class="cr-icon">&#x2714;</i></span> 
													Active
												</label>
											</div>
										</div>
															
									</div>
								</div>
							</div>
						</div> <!-- / -->

						<div class="col-md-6" >
							<div class="form-horizontal">
								<div class="form-group">
									<label for="currency" class="col-xs-2 col-sm-3 control-label">Currency</label>
									<div class="col-xs-3">
										<div class="form-inline">
											<select id="currency" 
													name="currency"
													class="form-control input-sm currency-select"
													[disabled]="fund.hasTransaction" 
													[desactive]="mode"
													[ngClass]="{'w-invalid': (fund.status == 0 && !fund.currency)}" 
													[required]="fund.status == 0"  
													[(ngModel)]="fund.currency">
												<option *ngFor="let c of currencyList" [ngValue]="c.ccyId">{{c.ccyId}}</option>
											</select>
										</div>
															
									</div>
								</div>								
							</div>
						</div>
					</div>

					<div class="row marginTop4">
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">Custodian Bank</label>
									<div class="col-sm-5">										
										<search-agent [disabled]="fund.hasTransaction || mode == StateMode.readonly" [required]="fund.status<2" [(agentId)]="fund.depositBank" [type]="'DB'"></search-agent>												
									</div>											
								</div>
							</div>
						</div>						
					</div> <!-- / Custodian Bank -->
					
					<div class="row marginTop4">
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class=" col-sm-4 control-label" >Deposit Account</label>	
									<div class="col-sm-5 col-md-8 col-lg-7">										
										<input [required]="fund.status==1" type="text" class="form-control input-sm" id="depositAccount" [disabled]="fund.hasTransaction || mode == StateMode.readonly" [(ngModel)]="fund.depositAccount" maxlength="35" >				
									</div>
								</div>
							</div>
						</div>					
					</div> 

					<div class="row marginTop4">
						<div class="col-md-6"> 
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">ISIN</label>
									<div class="col-sm-4">										
										<input  type="text" class="form-control input-sm" id="isinCode" [disabled]="fund.hasTransaction || mode == StateMode.readonly" [(ngModel)]="fund.isinCode" maxlength="12" >				
									</div>	
									<div class="col-sm-4">										
														
									</div>					
								</div>
							</div>
						</div> <!-- / isin -->						
					</div>
					
					<div class="row marginTop4">
						<div class="col-md-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">IBAN</label>
									<div class="col-sm-5 col-md-8 col-lg-7">										
											<input [required]="fund.status==1" type="text" class="form-control input-sm" id="iban" [desactive]="mode" [ngModel]="fund.iban|iban" (ngModelChange)="fund.iban=$event" maxlength="43" >			
									</div>	
									<div class="col-sm-4">										
														
									</div>					
								</div>
							</div>
						</div> <!-- / iban -->		
						
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class=" col-sm-3 control-label" >Cash Account</label>	
									<div class="col-sm-5 col-md-8 col-lg-7">										
										<input [required]="fund.status==1" type="text" class="form-control input-sm" id="cashAccount" [desactive]="mode" [(ngModel)]="fund.cashAccount" maxlength="20" >				
									</div>
								</div>
							</div>
						</div>	
					</div>



					<div class="row marginTop4">
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label for="name" class="col-sm-4 control-label">Name</label>
									<div class="col-sm-5 col-md-8 col-lg-7">
										<input type="text" name="name" class="form-control input-sm" id="name" [desactive]="mode" [(ngModel)]="fund.name" maxlength="35">					
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label for="documentationName" class="col-sm-4 col-lg-3 control-label">Document Name</label>								
									<div class="col-sm-5 col-md-8 col-lg-7">
										<input name="documentationName" type="text" class="form-control input-sm" id="documentationName" [desactive]="mode" [(ngModel)]="fund.documentationName" maxlength="100" >
									</div>
								</div>
							</div>	
							
						</div>						
					</div> 

					<div class="line-break-big"></div>
					<div class="row">
						<div class="col-md-6 col-md-offset-1">
							<div class="title">Pricing</div>
						</div>		
					</div>
					<div class="row">
						<div class="col-xs-12">	
							<pricing [pricing]="fund" [mode]="mode"></pricing>
						</div>
					</div>


					<div class="line-break-big"></div>

					<div class="row marginTop4">																	
						<!--Circular Letter LC08/1-->
						<div class="col-sm-9">
							<div class="row">
								<div class="col-sm-4">	
									<div class="form-horizontal">
										<div class="form-group">
											<label class="col-sm-8 control-label text-right">Circular</label>	
											<div class="col-sm-4">	
												<circular [mode]="mode" [(value)]="fund.groupingCode" [required]="fund.status==1"></circular>																		
											</div>
										</div>
									</div>	
								</div>				
								<div class="col-sm-2">
									<div class="form-horizontal">
										<div class="form-group">
											<label class="col-sm-8 control-label text-right">Fund Classification</label>	
											<div class="col-sm-4">	
												<select [required]="fund.status==1" class="form-control input-sm text-left" [desactive]="mode" [(ngModel)]="fund.fundClassification" id="fundClassification" name="fundClassification">
													<option *ngFor="let e of fundClassificationList" [ngValue]="e.keyValue">{{e.description}}</option>
												</select>						
											</div>
										</div>
									</div>								
								</div>
								<div class="col-sm-2">		
									<div class="form-horizontal">
										<div class="form-group">
											<label class="col-sm-6 control-label text-right">Class of risk</label>	
											<div class="col-sm-4">	
												<select class="form-control input-sm text-left" [desactive]="mode" [(ngModel)]="fund.classOfRisk" id="classOfRisk" name="classOfRisk">
													<option *ngFor="let e of riskClassList" [ngValue]="e.keyValue">{{e.description}}</option>
												</select>					
											</div>
										</div>
									</div>						
								</div>
							</div>
						</div>
					</div>

					<div class="line-break-thin"></div>

					<div class="row marginVertical8">
						<!-- Notes -->
						<div class="col-md-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">Note</label>
									<div class="col-sm-7">
										<textarea name="notes" id="notes" class="form-control w-100" rows="4" [desactive]="mode" [(ngModel)]="fund.notes" maxlength="100"></textarea>							
									</div>
								</div>
							</div>
						</div>					
					</div>

					<fund-footer [fund]="fund"></fund-footer>


				</div>
			
		</div>
	</div>
 </div>
</div>