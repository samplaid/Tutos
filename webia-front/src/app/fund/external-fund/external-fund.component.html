<ng-template ngbModalContainer  *ngIf="!inModal"></ng-template>
<div class="marginTop4 relative" >
  <div [ngBusy]="[busy]">
	<div class="fund fe fund-container container-fluid relative">
		<div class="split-screen" [ngBusy]="subs">
			<div class="menu marginLeft3" *ngIf="!inModal">
				<div class="row vertical-center-noline ">
					<!-- Dedicated Fund: Header -->						
					<div class="col-md-6 paddingLeft12">
						<h3>{{title}}</h3>
					</div>
					<div class="col-md-6">
						<div class="pull-right paddingRight7">
							<button type="submit" class="btn btn-xs btn-primary" (click)="save()" [desactive]="mode">
								<i class="fa fa-floppy-o"></i>Save</button>
							<button type="button" class="btn btn-xs btn-primary" (click)="refresh()" [desactive]="mode">
								<i class="fa fa-refresh"></i>Refresh</button>
						</div>
					</div>
					
				</div>
			</div>	
			<!-- Dedicated Fund: Content -->			
				<div  [ngClass]="{'form':!inModal}">
					<div class="row">
						<div class="col-md-8 col-md-offset-2">	
							<ngbd-alert-container ref='fundCpt'></ngbd-alert-container>
						</div>
					</div>
					<!-- Code/name/Pool/Document Name-->
					<div class="row">
						<div class="col-md-6" >
							<div class="form-horizontal">
								<div class="form-group">
									<label for="code" class="col-sm-4 control-label">Code</label>
									<div class="col-sm-2">
										<input disabled type="text" name="code" class="form-control input-sm rounded" id="code" [(ngModel)]="fund.fdsId" maxlength="8">					
									</div>
									<div class="form-group">
										<div class="col-sm-3 col-sm-push-1 col-md-push-3">
											<div class="checkbox checkbox-r">
												<label>
													<input #inputCheck type="checkbox"  [desactive]="mode" [checked]="fund.status==1" (change)="checkChange(inputCheck)">
													<span class="cr"><i class="cr-icon">&#x2714;</i></span> 
													Active
												</label>
											</div>
										</div>
															
									</div>
								</div>
							</div>
							
							<div class="form-horizontal">
								<div class="form-group">
									<label for="name" class="col-sm-4 control-label">Name</label>
									<div class="col-sm-5 col-md-8 col-lg-7">
										<input type="text" name="name" class="form-control input-sm" id="name" [desactive]="mode" [(ngModel)]="fund.name" maxlength="35">					
									</div>
								</div>
								
							</div>
						</div> <!-- / -->

						<div class="col-md-6" >
							<div class="form-horizontal">
								<div class="form-group">
									<label for="currency" class="col-xs-2 col-sm-3 control-label">Currency</label>
									<div class="col-xs-3">
										<div class="form-inline">
											<select id="currency" 
													name="currency"
													class="form-control input-sm currency-select"
													[disabled]="fund.hasTransaction" 
													[desactive]="mode"
													[ngClass]="{'w-invalid': (fund.status == 0 && !fund.currency)}" 
													[required]="fund.status == 0"  
													[(ngModel)]="fund.currency">
												<option *ngFor="let c of currencyList" [ngValue]="c.ccyId">{{c.ccyId}}</option>
											</select>
										</div>
															
									</div>
								</div>								
							</div>
							<div class="form-horizontal">
								<div class="form-group">
									<label for="documentationName" class="col-sm-4 col-lg-3 control-label">Document Name</label>								
									<div class="col-sm-5 col-md-8 col-lg-7">
										<input name="documentationName" type="text" class="form-control input-sm" id="documentationName" [desactive]="mode" [(ngModel)]="fund.documentationName" maxlength="100" >
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="row marginTop4">
						<div class="col-md-6"> 
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">ISIN</label>
									<div class="col-sm-4">										
										<input  type="text" class="form-control input-sm" id="isinCode" [disabled]="fund.hasTransaction || mode == StateMode.readonly" [(ngModel)]="fund.isinCode" maxlength="12" >				
									</div>	
									<div class="col-sm-4">										
														
									</div>					
								</div>
							</div>
						</div> <!-- / isin -->						
					</div>
					
					<div class="row marginTop4">
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">Custodian Bank</label>
									<div class="col-sm-5">										
										<search-agent [disabled]="fund.hasTransaction || mode == StateMode.readonly" [required]="fund.status<2" [(agentId)]="fund.depositBank" [type]="'DB'"></search-agent>												
									</div>											
								</div>
							</div>
						</div>						
					</div> <!-- / Custodian Bank -->

					<div class="row marginTop4">
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">Broker</label>
									<div class="col-sm-5">
										<search-agent [disabled]="mode == StateMode.readonly" [(agentId)]="fund.broker" [type]="'BK'"></search-agent>
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class=" col-sm-3 control-label" >Deposit Account</label>	
									<div class="col-sm-5 col-md-8 col-lg-7">										
										<input [required]="fund.status==1" type="text" class="form-control input-sm" id="depositAccount" [disabled]="fund.hasTransaction || mode == StateMode.readonly" [(ngModel)]="fund.depositAccount" maxlength="20" >				
									</div>
								</div>
							</div>
						</div>						
					</div> <!-- / Broker/deposit -->

					<div class="line-break-big"></div>
					<div class="row">
						<div class="col-md-6 col-md-offset-1">
							<div class="title">Pricing</div>
						</div>		
					</div>
					<div class="row">
						<div class="col-xs-12">	
							<pricing [pricing]="fund" [mode]="mode"></pricing>
						</div>
					</div>

					<div class="line-break-big"></div>

					<div class="row">
						<div class="col-sm-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class=" col-sm-4 control-label" >Ucits</label>
									<div class="col-md-6 radio"> 
										<label class="radio-inline">
											<input type="radio" name="ucits" id="capiId" value="true" [desactive]="mode" (change)="setUcits($event)" [checked]="(fund.ucits!=undefined || fund.ucits!=null) && fund.ucits"> 
											<span class="cr"><i class="cr-icon fa fa-circle"></i></span> Yes
										</label>
										<label class="radio-inline">
											<input type="radio" name="ucits" id="distId" value="false" [desactive]="mode" (change)="setUcits($event)" [checked]="(fund.ucits!=undefined || fund.ucits!=null) && !fund.ucits "> 
											<span class="cr"><i class="cr-icon fa fa-circle"></i></span> No
										</label>
									</div> <!-- / capitalisation -->
								</div>							
							</div>
						</div>
						
					</div>

					<div class="row marginTop4">						
						<div class="col-md-6">							
							<div class="form-horizontal">	
								<!--Circular Letter LC08/1-->
								<div class="form-group">
									<label class="col-sm-4 control-label">Circular Letter LC08/1 </label>	
									<div class="col-sm-5">	
										<label>Max Allocation </label>									
										<div class="form-inline">
											<w-number  [(number)]="fund.maxAllocationPercent" css="form-control input-sm text-right input-percent" [mode]="mode" [precision]="2"></w-number><span>%</span>
										</div>					
									</div>				
								</div>
								<!--Circular Letter LC08/1-->
								<div class="form-group">
									<label class="col-sm-4 control-label">Circular Letter LC15/3 </label>	
									<div class="col-sm-8">
										<div class="form-inline">
											<div class="form-group paddingLeft5">		
												<label>N</label>
												<div class="form-inline">
													<w-number name="maxAllocationN" [(number)]="fund.maxAllocationN" css="form-control input-sm text-right input-percent" [mode]="mode" [precision]="2"><label for="maxAllocationN">%</label></w-number>					
												</div>													
											</div>	
											<div class="form-group paddingLeft12">
												<label>A</label>
												<div class="form-inline">
													<w-number  name="maxAllocationA" [(number)]="fund.maxAllocationA" css="form-control input-sm text-right input-percent" [mode]="mode" [precision]="2"><label for="maxAllocationA">%</label></w-number>					
												</div>
											</div>
											<div class="form-group paddingLeft12">
												<label>B</label>
												<div class="form-inline">
													<w-number  [(number)]="fund.maxAllocationB" css="form-control input-sm text-right input-percent" [mode]="mode" [precision]="2"></w-number><span>&nbsp;%</span>					
												</div>	
											</div>
											<div class="form-group paddingLeft12">
												<label>C</label>
												<div class="form-inline">
													<w-number  [(number)]="fund.maxAllocationC" css="form-control input-sm text-right input-percent" [mode]="mode" [precision]="2"></w-number><span>%</span>					
												</div>	
											</div>
											<div class="form-group paddingLeft12">
												<label>D</label>
												<div class="form-inline">
													<w-number  [(number)]="fund.maxAllocationD" css="form-control input-sm text-right input-percent" [mode]="mode" [precision]="2"></w-number><span>%</span>					
												</div>	
											</div>										
										</div>	
									</div>		
								</div>
								<div class="line-break-big"></div>
								<!-- Fund Classification -->
								<div class="form-group">
									<label class="col-sm-4 control-label">Class of risk</label>
									<div class="col-sm-1">
										<select class="form-control input-sm text-left" [desactive]="mode" [(ngModel)]="fund.classOfRisk" id="classOfRisk" name="classOfRisk">
											<option *ngFor="let e of riskClassList" [ngValue]="e.keyValue">{{e.description}}</option>
										</select>
									</div>
								</div>																																		
							</div>
							<div class="line-break"></div>				
						</div>
					</div>

					<div class="line-break-thin"></div>

					<div class="row marginVertical8">
						<!-- Notes -->
						<div class="col-md-6">
							<div class="form-horizontal">
								<div class="form-group">
									<label class="col-sm-4 control-label">Note</label>
									<div class="col-sm-7">
										<textarea name="notes" id="notes" class="form-control w-100" rows="4" [desactive]="mode" [(ngModel)]="fund.notes" maxlength="100"></textarea>							
									</div>
								</div>
							</div>
						</div>					
					</div>

					<fund-footer [fund]="fund"></fund-footer>

				</div>
		</div>
	</div>
  </div>
</div>