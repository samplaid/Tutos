<ng-template #content>
  <div class="modal-header">
   <button type="button" class="close pull-right" aria-label="Close" (click)="dismiss('Cross click')"><span aria-hidden="true">&times;</span></button>
   <h4 class="modal-title">Search {{header}}</h4>
  </div>
  <div class="modal-body">
    <form (ngSubmit)="search(1)" > 
        <label class="col-xs-2 text-right marginTop">Name / Code</label>
        <div class="col-xs-6"><input type="text" id="searchTxt" name="searchTxt" class="input-sm form-control" [(ngModel)]="searchCriteria.filter" [autofocus]></div>
        <button class="btn btn-primary btn-xs" [disabled]="!searchCriteria.filter" type="submit" ><span aria-hidden="true" class="glyphicon glyphicon-search"></span> Search</button>
        <div class="pull-right" *ngIf="page.totalRecordCount>0">{{page.totalRecordCount}} Result(s)</div>
    </form>
    <div class="line-break"></div>
    <div class="relative">
      <div [ngBusy]="[busy]">
       <table class="table dataTable table-striped table-hover nomargin fullwidth" role="grid" *ngIf="page.content">
            <thead>
                <tr role="row">
                  <th>Code</th>
                  <th>Name</th>
                  <th *ngIf="hasMultipleTypes" width="10%">Role</th>
                  <th>Address</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let agent of page.content" (click)="selectItem(agent)" (dblclick)="close(selected)" [ngClass]="{'selected' : agent?.agtId==selected?.agtId}">
                  <td>{{agent.agtId }}</td>
                  <td>{{agent.name | capitalize}}</td>
                  <td *ngIf="hasMultipleTypes"  class="text-center"><agt-label [categoryCode]="agent.category"></agt-label></td>
                  <td>{{agent | address}}</td>
                </tr>
                <tr *ngIf="noResult"><td colspan="3" class="text-center"><p style="padding: 300px">No result found </p></td></tr>
            </tbody>
            <tfoot *ngIf="page.totalPageCount>1">
                <tr>
                  <td colspan="10" class="text-center">
                      <!-- <ngb-pagination *ngIf="page.totalPageCount>1" class="text-center" (pageChange)="search($event)"
                          [collectionSize]="page.totalRecordCount" [pageSize]="page.pageSize" [(page)]="page.currentPage" [maxSize]="10" [ellipses]="true" [boundaryLinks]="true"></ngb-pagination> -->

                      <pagination *ngIf="page.totalPageCount>1" class="text-center" [boundaryLinks]="true" 
                                  [totalItems]="page.totalRecordCount" [itemsPerPage]="page.pageSize" [(ngModel)]="page.currentPage" (pageChanged)="search($event.page)" [maxSize]="10"
                                  previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;"></pagination>                                                    
                  </td>
                </tr>
            </tfoot>
          </table>

      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-xs btn-primary" [disabled]="!selected" (click)="close(selected)">Validate</button>
  </div>
</ng-template>


 <div class="form-inline">
     <div class="input-group input-group-sm search-agent">
        <div [ngClass]="css + ' ' + (required && !agentId ? 'ng-invalid':'')+ ' ' + (disabled ? 'disabled':'')" class="search-box form-control input-sm" id="s-box-id" (click)="tryOpen(content)" >
          <!-- <div class="search-caption" [attr.title]="_title" [innerHtml]="_label"></div> -->
          <ng-template ad-agt-label></ng-template>
        </div>  

        <div class="input-group-btn search-btn" *ngIf="!disabled">
          <button type="button" (click)="open(content)" [disabled]="disabled" class="btn btn-xs btn-primary paddingVertical" ><i class="fa fa-search" aria-hidden="true"></i></button>
          <button type="button" (click)="clear()" *ngIf="agentId && allowClear" [disabled]="disabled" class="btn btn-xs btn-primary paddingVertical" ><i class="fa fa-minus" aria-hidden="true"></i></button>Â¨
          <ng-content></ng-content>
        </div>      
     </div>
    <!--<span  *ngIf="disabled">{{ agentId }} - </span>
    <span class="search-caption" [innerHtml]="_label"></span>-->
 </div>
    