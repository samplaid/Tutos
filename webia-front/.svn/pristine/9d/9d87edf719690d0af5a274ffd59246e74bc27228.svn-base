<section subject="policy-holder-input">
    <div class="row client">
        <div class="policyholder">
            <ng-template ngFor let-client [ngForOf]="policyHolders" let-i="index" let-last="last">
                <!-- {{client | json}}<br /> -->
                <ng-container *ngIf="showDead || (!showDead && !client.dead)">
                    <div class="col-xs-12 nopadding">
                        <label class="policyholder-caption marginTop col-md-2 text-right">Policyholder ({{ i + 1 }})</label>
                        <div class="form-group col-md-10 form-inline text-left" [ngClass]="{'policyholder-form-group' : product?.nlCountry=='FRA'}">
                            <div class="row">
                                <div class="col-md-8">
                                    <search-client [includeDeceased]="false" [(clientId)]="client.clientId"  [disabled]="modes['search-client'] == stateMode.readonly || modes['search-client'] == stateMode.waiting"  [allowClear]="false">
                                        <button class="btn btn-sm btn-primary" (click)="remove(client);" [desactive]="modes['search-client']"><i class="fa fa-minus" aria-hidden="true"></i></button>
                                        <button *ngIf="last" class="btn btn-sm btn-primary" (click)="removeLast()"><i class="fa fa-plus" aria-hidden="true"></i></button>
                                    </search-client> 
                                </div>                            
                            </div>
                            <div class="row" *ngIf="enablePolicyHolderRole">
                                <div class="policyholder-cb col-md-offset-1 checkbox">
                                    <label class="checkbox-inline" *ngIf="activationFlag.activatedUsufructuary"> 
                                        <input type="checkbox" name="usufructuary" class="input-sm" [desactive]="modes['usufructuary']" [(ngModel)]="client.usufructuary"><span class="cr"><i class="cr-icon">&#x2714;</i></span>
                                        <span class="cb-caption">Usufructuary</span>
                                    </label>                            
                                    <label class="checkbox-inline" *ngIf="activationFlag.activatedBareOwner">
                                        <input type="checkbox" name="bareOwner" class="input-sm" [desactive]="modes['bareOwner']" [(ngModel)]="client.bareOwner"><span class="cr"><i class="cr-icon">&#x2714;</i></span>
                                        <span class="cb-caption">Bare Owner</span>
                                    </label>
                                    <label class="checkbox-inline" *ngIf="activationFlag.activatedSuccessionDeath"> 
                                        <input type="checkbox" name="deathSuccessor" class="input-sm" [desactive]="modes['deathSuccessor']" [(ngModel)]="client.deathSuccessor"><span class="cr"><i class="cr-icon">&#x2714;</i></span>
                                        <span class="cb-caption">{{product.nlCountry!='FRA'  ? 'Legalheirs':'Succession'}} (death)</span>
                                    </label>
                                    <label class="checkbox-inline" *ngIf="activationFlag.activatedSuccessionLife || (term ==year_term)"> 
                                        <input type="checkbox" name="lifeSuccessor" class="input-sm" [desactive]="modes['lifeSuccessor']" [(ngModel)]="client.lifeSuccessor"><span class="cr"><i class="cr-icon">&#x2714;</i></span>
                                        <span class="cb-caption">{{product.nlCountry!='FRA' ? 'Legalheirs':'Succession'}} (life)</span>
                                    </label>     
                                </div>
                            </div> 
                        </div> 
                    </div>     
                </ng-container>
            </ng-template>
            <div class="col-xs-12 nopadding" *ngIf="( !policyHolders || policyHolders.length==0 || showAdditional)">
                <label  class="marginTop col-md-2 text-right">Policyholder ({{ policyHolders ? policyHolders.length+1 : 1 }})</label>
                <div class="form-group col-md-10 nopadding form-inline">
                    <div class="col-md-8">
                        <search-client [includeDeceased]="false" [(clientId)]="tmpPH" (onChange)="tmpPH=null;addPolicyHolder($event)" [disabled]="modes['search-client'] == stateMode.readonly" [allowClear]="false"></search-client>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>